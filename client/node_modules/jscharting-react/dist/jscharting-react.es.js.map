{"version":3,"file":"jscharting-react.es.js","sources":["../src/index.jsx"],"sourcesContent":["import React from 'react';\r\nimport * as JSC from 'jscharting';\r\n\r\nexport default class JSCharting extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.instance = undefined;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.applyProperties();\r\n\t\tthis.renderChart();\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tif (this.instance) {\r\n\t\t\tthis.instance.dispose();\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tthis.renderChart();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tref={node => (this.container = node)}\r\n\t\t\t\tclassName={this.props.className}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\trenderChart() {\r\n\t\tconst cb = this.props.callback;\r\n\t\tconst options = this.props.options || this.props;\r\n\t\tconst ignoreStateUpdate = this.props.ignoreStateUpdate;\r\n\t\tconst updateExisting =\r\n\t\t\tthis.instance && this.props.mutable !== false && !this.instance.dirty;\r\n\r\n\t\t// Skip update if chart exists and ignoreStateUpdate is true\r\n\t\tif (!this.instance || !ignoreStateUpdate) {\r\n\t\t\tif (updateExisting) {\r\n\t\t\t\tthis.instance.options(options);\r\n\t\t\t} else {\r\n\t\t\t\tif (this.instance) {\r\n\t\t\t\t\tthis.instance.destroy();\r\n\t\t\t\t}\r\n\t\t\t\tconst containerElement = this.container;\r\n\t\t\t\tconst config = Object.assign(\r\n\t\t\t\t\t{ targetElement: containerElement },\r\n\t\t\t\t\toptions\r\n\t\t\t\t);\r\n\t\t\t\tthis.instance = new JSC.Chart(config, cb);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tapplyProperties() {\r\n\t\tconst containerElement = this.container;\r\n\t\tif (containerElement) {\r\n\t\t\tconst options = this.props.options || this.props;\r\n\t\t\tconst stringifySize = size =>\r\n\t\t\t\tsize && Number(size) === size ? size + 'px' : size;\r\n\t\t\tcontainerElement.style.width = stringifySize(options.width) || '100%';\r\n\t\t\tcontainerElement.style.height = stringifySize(options.height) || '100%';\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass JSCLabel extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.renderLabel();\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.destroy();\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tthis.renderLabel();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tref={node => (this.container = node)}\r\n\t\t\t\tclassName={this.props.className}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tconst containerElement = this.container;\r\n\t\tif (containerElement) {\r\n\t\t\tcontainerElement.innerHTML = '';\r\n\t\t}\r\n\t}\r\n\r\n\trenderLabel() {\r\n\t\tthis.destroy();\r\n\t\tconst containerElement = this.container;\r\n\t\tconst options = this.props.options;\r\n\t\tconst textProperty = options && options.text;\r\n\t\tJSC.label(\r\n\t\t\tcontainerElement,\r\n\t\t\ttextProperty || options,\r\n\t\t\ttextProperty && options\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass JSCGrid extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.instance = undefined;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.renderGrid();\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.instance && this.instance.destroy();\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tthis.renderGrid();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tref={node => (this.container = node)}\r\n\t\t\t\tclassName={this.props.className}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\trenderGrid() {\r\n\t\tconst cb = this.props.callback;\r\n\t\tconst options = this.props.options || this.props;\r\n\t\tconst updateExisting = this.instance && this.props.mutable;\r\n\r\n\t\tif (updateExisting) {\r\n\t\t\tthis.instance.options(options);\r\n\t\t} else {\r\n\t\t\tthis.instance && this.instance.destroy();\r\n\t\t\tconst containerElement = this.container;\r\n\t\t\tJSC.Grid(containerElement, options).then(grid => {\r\n\t\t\t\tthis.instance = grid;\r\n\t\t\t\tcb && cb(grid);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport { JSCharting, JSCLabel, JSCGrid, JSC };\r\n"],"names":["JSCharting","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","instance","undefined","_createClass","key","value","componentDidMount","applyProperties","renderChart","componentWillUnmount","dispose","componentDidUpdate","render","_this2","React","createElement","ref","node","container","className","cb","callback","options","ignoreStateUpdate","updateExisting","mutable","dirty","destroy","containerElement","config","Object","assign","targetElement","JSC","Chart","stringifySize","size","Number","style","width","height","Component","JSCLabel","_React$Component2","_super2","renderLabel","_this3","innerHTML","textProperty","text","label","JSCGrid","_React$Component3","_super3","_this4","renderGrid","_this5","_this6","Grid","then","grid"],"mappings":"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"}